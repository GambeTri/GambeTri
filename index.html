<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GambeTri</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background-color: #f2f2f2; color: #333; }
    header { background-color: #1b1b1b; color: white; padding: 1rem; text-align: center; }
    nav { display: flex; justify-content: center; background-color: #333; flex-wrap: wrap; }
    nav button {
      background: none; color: white; border: none;
      padding: 1rem; cursor: pointer; font-size: 1rem;
    }
    nav button:hover { background-color: #555; }
    .section { display: none; padding: 2rem; }
    .active { display: block; }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    th, td { border: 1px solid #ccc; padding: 0.5rem; text-align: center; }
    th { background-color: #333; color: white; }
    .top-pos { background-color: #d4edda; }
    .mid-pos { background-color: #fff3cd; }
    .low-pos { background-color: #f8d7da; }
  </style>
</head>
<body>
  <header>
    <h1>GambeTri</h1>
    <p>El portal de estadísticas del fútbol ecuatoriano</p>
  </header>
  <nav>
    <button onclick="showSection('inicio')">Inicio</button>
    <button onclick="showSection('mano-a-mano')">Mano a Mano</button>
    <button onclick="showSection('resultados')">Resultados Oficiales</button>
    <button onclick="showSection('posiciones')">Tabla de Posiciones</button>
    <button onclick="showSection('calculadora')">Calculadora</button>
  </nav>

  <section id="inicio" class="section active">
    <h2>Bienvenido a GambeTri</h2>
    <p>Explora estadísticas, historia y actualidad del fútbol ecuatoriano.</p>
    <img src="logo-ultimo.png" alt="Logo GambeTri" style="max-width: 90%; margin: auto; display: block;" />
  </section>

  <section id="mano-a-mano" class="section">
    <h2>Historial Mano a Mano</h2>
    <select id="selector-enfrentamiento">
      <option value="LDU-Quito">LDU vs Quito</option>
      <option value="LDU-Barcelona">LDU vs Barcelona</option>
      <option value="LDU-Nacional">LDU vs Nacional</option>
      <option value="Barcelona-Emelec">Barcelona vs Emelec</option>
      <option value="Barcelona-Nacional">Barcelona vs Nacional</option>
      <option value="LDU-IDV">LDU vs IDV</option>
      <option value="Cuenca-LDU">Cuenca vs LDU</option>
      <option value="Macará-Técnico">Macará vs Técnico</option>
      <option value="LDU-Delfín">LDU vs Delfín</option>
      <option value="LDU-Católica">LDU vs Católica</option>
    </select>
    <canvas id="graficoEnfrentamiento" width="400" height="250"></canvas>
  </section>

  <section id="resultados" class="section">
    <h2>Resultados Oficiales</h2>
    <table class="match-table" id="tabla-oficial">
      <tr><td>14:00</td><td>I. del Valle</td><td>1</td><td>-</td><td>1</td><td>Libertad</td></tr>
      <tr><td>16:30</td><td>Barcelona SC</td><td>1</td><td>-</td><td>2</td><td>Manta</td></tr>
      <tr><td>19:00</td><td>Vinotinto FC</td><td>1</td><td>-</td><td>2</td><td>Liga de Quito</td></tr>
      <tr><td>13:00</td><td>T. Universitario</td><td>0</td><td>-</td><td>2</td><td>Aucas</td></tr>
      <tr><td>15:30</td><td>D. Cuenca</td><td>1</td><td>-</td><td>1</td><td>El Nacional</td></tr>
      <tr><td>18:00</td><td>Delfín</td><td>3</td><td>-</td><td>0</td><td>Mushuc Runa</td></tr>
      <tr><td>19:00</td><td>Orense</td><td>1</td><td>-</td><td>1</td><td>Macará</td></tr>
    </table>
  </section>

  <section id="posiciones" class="section">
    <h2>Tabla de Posiciones Oficial</h2>
    <div id="tabla-posiciones-oficial"></div>
  </section>

  <section id="calculadora" class="section">
    <h2>Calculadora de Resultados</h2>
    <p>Puedes simular resultados y ver cómo se actualiza la tabla:</p>
    <table class="match-table" id="tabla-calculadora">
      <tr><td>14:00</td><td>I. del Valle</td><td contenteditable>1</td><td>-</td><td contenteditable>1</td><td>Libertad</td></tr>
      <tr><td>16:30</td><td>Barcelona SC</td><td contenteditable>1</td><td>-</td><td contenteditable>2</td><td>Manta</td></tr>
      <tr><td>19:00</td><td>Vinotinto FC</td><td contenteditable>1</td><td>-</td><td contenteditable>2</td><td>Liga de Quito</td></tr>
      <tr><td>13:00</td><td>T. Universitario</td><td contenteditable></td><td>-</td><td contenteditable></td><td>Aucas</td></tr>
      <tr><td>15:30</td><td>D. Cuenca</td><td contenteditable></td><td>-</td><td contenteditable></td><td>El Nacional</td></tr>
      <tr><td>18:00</td><td>Delfín</td><td contenteditable></td><td>-</td><td contenteditable></td><td>Mushuc Runa</td></tr>
      <tr><td>19:00</td><td>Orense</td><td contenteditable></td><td>-</td><td contenteditable></td><td>Macará</td></tr>
    </table>
    <div id="tabla-calculada"></div>
  </section>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  function showSection(id) {
    document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  const tablaBase = [
    ["I. del Valle",15,31,9,4,2,29,14,15],
    ["Barcelona SC",14,29,9,2,3,20,15,5],
    ["Aucas",15,25,7,4,4,22,16,6],
    ["Liga de Quito",14,23,6,5,3,22,14,8],
    ["D. Cuenca",15,23,7,2,6,14,13,1],
    ["Orense",15,23,7,2,6,18,20,-2],
    ["Vinotinto FC",15,22,6,4,5,24,19,5],
    ["U. Católica",15,20,5,5,5,24,19,5],
    ["El Nacional",15,19,5,4,6,21,21,0],
    ["Libertad",15,19,5,4,6,19,20,-1],
    ["Delfín",15,18,4,6,5,12,20,-8],
    ["Manta",15,16,3,7,5,21,27,-6],
    ["Emelec",15,16,4,4,7,9,18,-9],
    ["Macará",15,15,3,6,6,12,15,-3],
    ["Mushuc Runa",15,15,4,3,8,21,26,-5],
    ["T. Universitario",15,10,2,4,9,14,25,-11]
  ];

  function calcularTabla(selector, destino) {
    const base = JSON.parse(JSON.stringify(tablaBase));
    document.querySelectorAll(selector + ' tr').forEach(fila => {
      const c = fila.querySelectorAll('td');
      const local = c[1]?.textContent.trim();
      const gl = parseInt(c[2]?.textContent);
      const gv = parseInt(c[4]?.textContent);
      const visitante = c[5]?.textContent.trim();
      if (!local || !visitante || isNaN(gl) || isNaN(gv)) return;

      const eqL = base.find(e => e[0] === local);
      const eqV = base.find(e => e[0] === visitante);
      if (!eqL || !eqV) return;

      eqL[1]++; eqV[1]++;
      eqL[6] += gl; eqL[7] += gv;
      eqV[6] += gv; eqV[7] += gl;

      if (gl > gv) { eqL[3]++; eqL[2] += 3; eqV[5]++; }
      else if (gl < gv) { eqV[3]++; eqV[2] += 3; eqL[5]++; }
      else { eqL[4]++; eqV[4]++; eqL[2]++; eqV[2]++; }

      eqL[8] = eqL[6] - eqL[7];
      eqV[8] = eqV[6] - eqV[7];
    });

    base.sort((a, b) => b[2] - a[2] || b[8] - a[8]);

    document.getElementById(destino).innerHTML = `
      <table><thead><tr><th>Pos</th><th>Equipo</th><th>PJ</th><th>PTS</th><th>PG</th><th>PE</th><th>PP</th><th>GF</th><th>GC</th><th>DF</th></tr></thead>
      <tbody>${base.map((e, i) => `
        <tr class="${i<6?'top-pos':i<12?'mid-pos':'low-pos'}">
          <td>${i+1}</td><td>${e[0]}</td><td>${e[1]}</td><td>${e[2]}</td>
          <td>${e[3]}</td><td>${e[4]}</td><td>${e[5]}</td><td>${e[6]}</td><td>${e[7]}</td><td>${e[8]}</td>
        </tr>`).join('')}</tbody></table>`;
  }

  calcularTabla('#tabla-oficial', 'tabla-posiciones-oficial');
  calcularTabla('#tabla-calculadora', 'tabla-calculada');
  document.querySelectorAll('#tabla-calculadora td[contenteditable]').forEach(td =>
    td.addEventListener('input', () => calcularTabla('#tabla-calculadora', 'tabla-calculada'))
  );

  const partidosData = {
    "LDU-Quito": [66, 53, 47, "LDU", "Empate", "Quito"],
    "LDU-Barcelona": [84, 60, 90, "LDU", "Empate", "Barcelona"],
    "LDU-Nacional": [81, 78, 80, "LDU", "Empate", "Nacional"],
    "Barcelona-Emelec": [73, 83, 75, "Emelec", "Empate", "Barcelona"],
    "Barcelona-Nacional": [99, 67, 100, "Barcelona", "Empate", "Nacional"],
    "LDU-IDV": [25, 16, 10, "LDU", "Empate", "IDV"],
    "Cuenca-LDU": [50, 57, 69, "Cuenca", "Empate", "LDU"],
    "Macará-Técnico": [18, 15, 12, "Macará", "Empate", "Técnico"],
    "LDU-Delfín": [29, 16, 16, "LDU", "Empate", "Delfín"],
    "LDU-Católica": [51, 29, 31, "LDU", "Empate", "Católica"]
  };

  const colores = {
    "LDU": "#FFFFFF", "Quito": "#DD0000", "Barcelona": "#FFFF00", "Nacional": "#FF0000",
    "Emelec": "#0000FF", "IDV": "#FF69B4", "Cuenca": "#FF0000", "Macará": "#00BFFF",
    "Técnico": "#FF6347", "Delfín": "#00CED1", "Católica": "#191970", "Empate": "#808080"
  };

  const ctx = document.getElementById('graficoEnfrentamiento')?.getContext('2d');
  let chart;
  function actualizarGrafico(key) {
    const d = partidosData[key];
    if (!d || !ctx) return;
    const data = {
      labels: [d[3], d[4], d[5]],
      datasets: [{
        label: 'Historial',
        data: [d[0], d[1], d[2]],
        backgroundColor: [colores[d[3]], colores[d[4]], colores[d[5]]]
      }]
    };
    if (chart) chart.destroy();
    chart = new Chart(ctx, { type: 'bar', data: data, options: { plugins: { legend: { display: false }}} });
  }

  const sel = document.getElementById('selector-enfrentamiento');
  if (sel) {
    sel.addEventListener('change', e => actualizarGrafico(e.target.value));
    actualizarGrafico(sel.value);
  }
});
</script>
</body>
</html>
